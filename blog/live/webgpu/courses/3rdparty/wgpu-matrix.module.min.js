function wrapConstructor(n,t){return class extends n{constructor(...n){super(...n);t(this)}}}const ZeroArray=wrapConstructor(Array,(n=>n.fill(0)));let EPSILON=1e-6;function setEpsilon(n){const t=EPSILON;EPSILON=n;return t}function degToRad(n){return n*Math.PI/180}function radToDeg(n){return n*180/Math.PI}function lerp(n,t,o){return n+(t-n)*o}function inverseLerp(n,t,o){const c=t-n;return Math.abs(t-n)<EPSILON?n:(o-n)/c}function euclideanModulo(n,t){return(n%t+t)%t}var utils={__proto__:null,get EPSILON(){return EPSILON},degToRad:degToRad,euclideanModulo:euclideanModulo,inverseLerp:inverseLerp,lerp:lerp,radToDeg:radToDeg,setEpsilon:setEpsilon};function getAPIImpl$5(n){function t(t=0,o=0){const c=new n(2);if(t!==undefined){c[0]=t;if(o!==undefined){c[1]=o}}return c}const o=t;function c(t,o,c){const s=c??new n(2);s[0]=t;s[1]=o;return s}function s(t,o){const c=o??new n(2);c[0]=Math.ceil(t[0]);c[1]=Math.ceil(t[1]);return c}function e(t,o){const c=o??new n(2);c[0]=Math.floor(t[0]);c[1]=Math.floor(t[1]);return c}function r(t,o){const c=o??new n(2);c[0]=Math.round(t[0]);c[1]=Math.round(t[1]);return c}function u(t,o=0,c=1,s){const e=s??new n(2);e[0]=Math.min(c,Math.max(o,t[0]));e[1]=Math.min(c,Math.max(o,t[1]));return e}function a(t,o,c){const s=c??new n(2);s[0]=t[0]+o[0];s[1]=t[1]+o[1];return s}function i(t,o,c,s){const e=s??new n(2);e[0]=t[0]+o[0]*c;e[1]=t[1]+o[1]*c;return e}function f(n,t){const o=n[0];const c=n[1];const s=t[0];const e=t[1];const r=Math.sqrt(o*o+c*c);const u=Math.sqrt(s*s+e*e);const a=r*u;const i=a&&b(n,t)/a;return Math.acos(i)}function l(t,o,c){const s=c??new n(2);s[0]=t[0]-o[0];s[1]=t[1]-o[1];return s}const h=l;function M(n,t){return Math.abs(n[0]-t[0])<EPSILON&&Math.abs(n[1]-t[1])<EPSILON}function w(n,t){return n[0]===t[0]&&n[1]===t[1]}function d(t,o,c,s){const e=s??new n(2);e[0]=t[0]+c*(o[0]-t[0]);e[1]=t[1]+c*(o[1]-t[1]);return e}function m(t,o,c,s){const e=s??new n(2);e[0]=t[0]+c[0]*(o[0]-t[0]);e[1]=t[1]+c[1]*(o[1]-t[1]);return e}function I(t,o,c){const s=c??new n(2);s[0]=Math.max(t[0],o[0]);s[1]=Math.max(t[1],o[1]);return s}function g(t,o,c){const s=c??new n(2);s[0]=Math.min(t[0],o[0]);s[1]=Math.min(t[1],o[1]);return s}function p(t,o,c){const s=c??new n(2);s[0]=t[0]*o;s[1]=t[1]*o;return s}const P=p;function S(t,o,c){const s=c??new n(2);s[0]=t[0]/o;s[1]=t[1]/o;return s}function A(t,o){const c=o??new n(2);c[0]=1/t[0];c[1]=1/t[1];return c}const q=A;function v(t,o,c){const s=c??new n(3);const e=t[0]*o[1]-t[1]*o[0];s[0]=0;s[1]=0;s[2]=e;return s}function b(n,t){return n[0]*t[0]+n[1]*t[1]}function L(n){const t=n[0];const o=n[1];return Math.sqrt(t*t+o*o)}const y=L;function E(n){const t=n[0];const o=n[1];return t*t+o*o}const x=E;function N(n,t){const o=n[0]-t[0];const c=n[1]-t[1];return Math.sqrt(o*o+c*c)}const O=N;function $(n,t){const o=n[0]-t[0];const c=n[1]-t[1];return o*o+c*c}const z=$;function F(t,o){const c=o??new n(2);const s=t[0];const e=t[1];const r=Math.sqrt(s*s+e*e);if(r>1e-5){c[0]=s/r;c[1]=e/r}else{c[0]=0;c[1]=0}return c}function T(t,o){const c=o??new n(2);c[0]=-t[0];c[1]=-t[1];return c}function k(t,o){const c=o??new n(2);c[0]=t[0];c[1]=t[1];return c}const Z=k;function R(t,o,c){const s=c??new n(2);s[0]=t[0]*o[0];s[1]=t[1]*o[1];return s}const V=R;function X(t,o,c){const s=c??new n(2);s[0]=t[0]/o[0];s[1]=t[1]/o[1];return s}const Y=X;function _(t=1,o){const c=o??new n(2);const s=Math.random()*2*Math.PI;c[0]=Math.cos(s)*t;c[1]=Math.sin(s)*t;return c}function D(t){const o=t??new n(2);o[0]=0;o[1]=0;return o}function Q(t,o,c){const s=c??new n(2);const e=t[0];const r=t[1];s[0]=e*o[0]+r*o[4]+o[12];s[1]=e*o[1]+r*o[5]+o[13];return s}function C(t,o,c){const s=c??new n(2);const e=t[0];const r=t[1];s[0]=o[0]*e+o[4]*r+o[8];s[1]=o[1]*e+o[5]*r+o[9];return s}function U(t,o,c,s){const e=s??new n(2);const r=t[0]-o[0];const u=t[1]-o[1];const a=Math.sin(c);const i=Math.cos(c);e[0]=r*i-u*a+o[0];e[1]=r*a+u*i+o[1];return e}function j(t,o,c){const s=c??new n(2);F(t,s);return p(s,o,s)}function B(t,o,c){const s=c??new n(2);if(L(t)>o){return j(t,o,s)}return k(t,s)}function G(t,o,c){const s=c??new n(2);return d(t,o,.5,s)}return{create:t,fromValues:o,set:c,ceil:s,floor:e,round:r,clamp:u,add:a,addScaled:i,angle:f,subtract:l,sub:h,equalsApproximately:M,equals:w,lerp:d,lerpV:m,max:I,min:g,mulScalar:p,scale:P,divScalar:S,inverse:A,invert:q,cross:v,dot:b,length:L,len:y,lengthSq:E,lenSq:x,distance:N,dist:O,distanceSq:$,distSq:z,normalize:F,negate:T,copy:k,clone:Z,multiply:R,mul:V,divide:X,div:Y,random:_,zero:D,transformMat4:Q,transformMat3:C,rotate:U,setLength:j,truncate:B,midpoint:G}}const cache$5=new Map;function getAPI$5(n){let t=cache$5.get(n);if(!t){t=getAPIImpl$5(n);cache$5.set(n,t)}return t}function getAPIImpl$4(n){const t=getAPI$5(n);function o(t,o,c,s,e,r,u,a,i){const f=new n(12);f[3]=0;f[7]=0;f[11]=0;if(t!==undefined){f[0]=t;if(o!==undefined){f[1]=o;if(c!==undefined){f[2]=c;if(s!==undefined){f[4]=s;if(e!==undefined){f[5]=e;if(r!==undefined){f[6]=r;if(u!==undefined){f[8]=u;if(a!==undefined){f[9]=a;if(i!==undefined){f[10]=i}}}}}}}}}return f}function c(t,o,c,s,e,r,u,a,i,f){const l=f??new n(12);l[0]=t;l[1]=o;l[2]=c;l[3]=0;l[4]=s;l[5]=e;l[6]=r;l[7]=0;l[8]=u;l[9]=a;l[10]=i;l[11]=0;return l}function s(t,o){const c=o??new n(12);c[0]=t[0];c[1]=t[1];c[2]=t[2];c[3]=0;c[4]=t[4];c[5]=t[5];c[6]=t[6];c[7]=0;c[8]=t[8];c[9]=t[9];c[10]=t[10];c[11]=0;return c}function e(t,o){const c=o??new n(12);const s=t[0];const e=t[1];const r=t[2];const u=t[3];const a=s+s;const i=e+e;const f=r+r;const l=s*a;const h=e*a;const M=e*i;const w=r*a;const d=r*i;const m=r*f;const I=u*a;const g=u*i;const p=u*f;c[0]=1-M-m;c[1]=h+p;c[2]=w-g;c[3]=0;c[4]=h-p;c[5]=1-l-m;c[6]=d+I;c[7]=0;c[8]=w+g;c[9]=d-I;c[10]=1-l-M;c[11]=0;return c}function r(t,o){const c=o??new n(12);c[0]=-t[0];c[1]=-t[1];c[2]=-t[2];c[4]=-t[4];c[5]=-t[5];c[6]=-t[6];c[8]=-t[8];c[9]=-t[9];c[10]=-t[10];return c}function u(t,o){const c=o??new n(12);c[0]=t[0];c[1]=t[1];c[2]=t[2];c[4]=t[4];c[5]=t[5];c[6]=t[6];c[8]=t[8];c[9]=t[9];c[10]=t[10];return c}const a=u;function i(n,t){return Math.abs(n[0]-t[0])<EPSILON&&Math.abs(n[1]-t[1])<EPSILON&&Math.abs(n[2]-t[2])<EPSILON&&Math.abs(n[4]-t[4])<EPSILON&&Math.abs(n[5]-t[5])<EPSILON&&Math.abs(n[6]-t[6])<EPSILON&&Math.abs(n[8]-t[8])<EPSILON&&Math.abs(n[9]-t[9])<EPSILON&&Math.abs(n[10]-t[10])<EPSILON}function f(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[8]===t[8]&&n[9]===t[9]&&n[10]===t[10]}function l(t){const o=t??new n(12);o[0]=1;o[1]=0;o[2]=0;o[4]=0;o[5]=1;o[6]=0;o[8]=0;o[9]=0;o[10]=1;return o}function h(t,o){const c=o??new n(12);if(c===t){let n;n=t[1];t[1]=t[4];t[4]=n;n=t[2];t[2]=t[8];t[8]=n;n=t[6];t[6]=t[9];t[9]=n;return c}const s=t[0*4+0];const e=t[0*4+1];const r=t[0*4+2];const u=t[1*4+0];const a=t[1*4+1];const i=t[1*4+2];const f=t[2*4+0];const l=t[2*4+1];const h=t[2*4+2];c[0]=s;c[1]=u;c[2]=f;c[4]=e;c[5]=a;c[6]=l;c[8]=r;c[9]=i;c[10]=h;return c}function M(t,o){const c=o??new n(12);const s=t[0*4+0];const e=t[0*4+1];const r=t[0*4+2];const u=t[1*4+0];const a=t[1*4+1];const i=t[1*4+2];const f=t[2*4+0];const l=t[2*4+1];const h=t[2*4+2];const M=h*a-i*l;const w=-h*u+i*f;const d=l*u-a*f;const m=1/(s*M+e*w+r*d);c[0]=M*m;c[1]=(-h*e+r*l)*m;c[2]=(i*e-r*a)*m;c[4]=w*m;c[5]=(h*s-r*f)*m;c[6]=(-i*s+r*u)*m;c[8]=d*m;c[9]=(-l*s+e*f)*m;c[10]=(a*s-e*u)*m;return c}function w(n){const t=n[0*4+0];const o=n[0*4+1];const c=n[0*4+2];const s=n[1*4+0];const e=n[1*4+1];const r=n[1*4+2];const u=n[2*4+0];const a=n[2*4+1];const i=n[2*4+2];return t*(e*i-a*r)-s*(o*i-a*c)+u*(o*r-e*c)}const d=M;function m(t,o,c){const s=c??new n(12);const e=t[0];const r=t[1];const u=t[2];const a=t[4+0];const i=t[4+1];const f=t[4+2];const l=t[8+0];const h=t[8+1];const M=t[8+2];const w=o[0];const d=o[1];const m=o[2];const I=o[4+0];const g=o[4+1];const p=o[4+2];const P=o[8+0];const S=o[8+1];const A=o[8+2];s[0]=e*w+a*d+l*m;s[1]=r*w+i*d+h*m;s[2]=u*w+f*d+M*m;s[4]=e*I+a*g+l*p;s[5]=r*I+i*g+h*p;s[6]=u*I+f*g+M*p;s[8]=e*P+a*S+l*A;s[9]=r*P+i*S+h*A;s[10]=u*P+f*S+M*A;return s}const I=m;function g(n,t,o){const c=o??l();if(n!==c){c[0]=n[0];c[1]=n[1];c[2]=n[2];c[4]=n[4];c[5]=n[5];c[6]=n[6]}c[8]=t[0];c[9]=t[1];c[10]=1;return c}function p(n,o){const c=o??t.create();c[0]=n[8];c[1]=n[9];return c}function P(n,o,c){const s=c??t.create();const e=o*4;s[0]=n[e+0];s[1]=n[e+1];return s}function S(n,t,o,c){const s=c===n?n:u(n,c);const e=o*4;s[e+0]=t[0];s[e+1]=t[1];return s}function A(n,o){const c=o??t.create();const s=n[0];const e=n[1];const r=n[4];const u=n[5];c[0]=Math.sqrt(s*s+e*e);c[1]=Math.sqrt(r*r+u*u);return c}function q(t,o){const c=o??new n(12);c[0]=1;c[1]=0;c[2]=0;c[4]=0;c[5]=1;c[6]=0;c[8]=t[0];c[9]=t[1];c[10]=1;return c}function v(t,o,c){const s=c??new n(12);const e=o[0];const r=o[1];const u=t[0];const a=t[1];const i=t[2];const f=t[1*4+0];const l=t[1*4+1];const h=t[1*4+2];const M=t[2*4+0];const w=t[2*4+1];const d=t[2*4+2];if(t!==s){s[0]=u;s[1]=a;s[2]=i;s[4]=f;s[5]=l;s[6]=h}s[8]=u*e+f*r+M;s[9]=a*e+l*r+w;s[10]=i*e+h*r+d;return s}function b(t,o){const c=o??new n(12);const s=Math.cos(t);const e=Math.sin(t);c[0]=s;c[1]=e;c[2]=0;c[4]=-e;c[5]=s;c[6]=0;c[8]=0;c[9]=0;c[10]=1;return c}function L(t,o,c){const s=c??new n(12);const e=t[0*4+0];const r=t[0*4+1];const u=t[0*4+2];const a=t[1*4+0];const i=t[1*4+1];const f=t[1*4+2];const l=Math.cos(o);const h=Math.sin(o);s[0]=l*e+h*a;s[1]=l*r+h*i;s[2]=l*u+h*f;s[4]=l*a-h*e;s[5]=l*i-h*r;s[6]=l*f-h*u;if(t!==s){s[8]=t[8];s[9]=t[9];s[10]=t[10]}return s}function y(t,o){const c=o??new n(12);c[0]=t[0];c[1]=0;c[2]=0;c[4]=0;c[5]=t[1];c[6]=0;c[8]=0;c[9]=0;c[10]=1;return c}function E(t,o,c){const s=c??new n(12);const e=o[0];const r=o[1];s[0]=e*t[0*4+0];s[1]=e*t[0*4+1];s[2]=e*t[0*4+2];s[4]=r*t[1*4+0];s[5]=r*t[1*4+1];s[6]=r*t[1*4+2];if(t!==s){s[8]=t[8];s[9]=t[9];s[10]=t[10]}return s}function x(t,o){const c=o??new n(12);c[0]=t;c[1]=0;c[2]=0;c[4]=0;c[5]=t;c[6]=0;c[8]=0;c[9]=0;c[10]=1;return c}function N(t,o,c){const s=c??new n(12);s[0]=o*t[0*4+0];s[1]=o*t[0*4+1];s[2]=o*t[0*4+2];s[4]=o*t[1*4+0];s[5]=o*t[1*4+1];s[6]=o*t[1*4+2];if(t!==s){s[8]=t[8];s[9]=t[9];s[10]=t[10]}return s}return{clone:a,create:o,set:c,fromMat4:s,fromQuat:e,negate:r,copy:u,equalsApproximately:i,equals:f,identity:l,transpose:h,inverse:M,invert:d,determinant:w,mul:I,multiply:m,setTranslation:g,getTranslation:p,getAxis:P,setAxis:S,getScaling:A,translation:q,translate:v,rotation:b,rotate:L,scaling:y,scale:E,uniformScaling:x,uniformScale:N}}const cache$4=new Map;function getAPI$4(n){let t=cache$4.get(n);if(!t){t=getAPIImpl$4(n);cache$4.set(n,t)}return t}function getAPIImpl$3(n){function t(t,o,c){const s=new n(3);if(t!==undefined){s[0]=t;if(o!==undefined){s[1]=o;if(c!==undefined){s[2]=c}}}return s}const o=t;function c(t,o,c,s){const e=s??new n(3);e[0]=t;e[1]=o;e[2]=c;return e}function s(t,o){const c=o??new n(3);c[0]=Math.ceil(t[0]);c[1]=Math.ceil(t[1]);c[2]=Math.ceil(t[2]);return c}function e(t,o){const c=o??new n(3);c[0]=Math.floor(t[0]);c[1]=Math.floor(t[1]);c[2]=Math.floor(t[2]);return c}function r(t,o){const c=o??new n(3);c[0]=Math.round(t[0]);c[1]=Math.round(t[1]);c[2]=Math.round(t[2]);return c}function u(t,o=0,c=1,s){const e=s??new n(3);e[0]=Math.min(c,Math.max(o,t[0]));e[1]=Math.min(c,Math.max(o,t[1]));e[2]=Math.min(c,Math.max(o,t[2]));return e}function a(t,o,c){const s=c??new n(3);s[0]=t[0]+o[0];s[1]=t[1]+o[1];s[2]=t[2]+o[2];return s}function i(t,o,c,s){const e=s??new n(3);e[0]=t[0]+o[0]*c;e[1]=t[1]+o[1]*c;e[2]=t[2]+o[2]*c;return e}function f(n,t){const o=n[0];const c=n[1];const s=n[2];const e=t[0];const r=t[1];const u=t[2];const a=Math.sqrt(o*o+c*c+s*s);const i=Math.sqrt(e*e+r*r+u*u);const f=a*i;const l=f&&b(n,t)/f;return Math.acos(l)}function l(t,o,c){const s=c??new n(3);s[0]=t[0]-o[0];s[1]=t[1]-o[1];s[2]=t[2]-o[2];return s}const h=l;function M(n,t){return Math.abs(n[0]-t[0])<EPSILON&&Math.abs(n[1]-t[1])<EPSILON&&Math.abs(n[2]-t[2])<EPSILON}function w(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]}function d(t,o,c,s){const e=s??new n(3);e[0]=t[0]+c*(o[0]-t[0]);e[1]=t[1]+c*(o[1]-t[1]);e[2]=t[2]+c*(o[2]-t[2]);return e}function m(t,o,c,s){const e=s??new n(3);e[0]=t[0]+c[0]*(o[0]-t[0]);e[1]=t[1]+c[1]*(o[1]-t[1]);e[2]=t[2]+c[2]*(o[2]-t[2]);return e}function I(t,o,c){const s=c??new n(3);s[0]=Math.max(t[0],o[0]);s[1]=Math.max(t[1],o[1]);s[2]=Math.max(t[2],o[2]);return s}function g(t,o,c){const s=c??new n(3);s[0]=Math.min(t[0],o[0]);s[1]=Math.min(t[1],o[1]);s[2]=Math.min(t[2],o[2]);return s}function p(t,o,c){const s=c??new n(3);s[0]=t[0]*o;s[1]=t[1]*o;s[2]=t[2]*o;return s}const P=p;function S(t,o,c){const s=c??new n(3);s[0]=t[0]/o;s[1]=t[1]/o;s[2]=t[2]/o;return s}function A(t,o){const c=o??new n(3);c[0]=1/t[0];c[1]=1/t[1];c[2]=1/t[2];return c}const q=A;function v(t,o,c){const s=c??new n(3);const e=t[2]*o[0]-t[0]*o[2];const r=t[0]*o[1]-t[1]*o[0];s[0]=t[1]*o[2]-t[2]*o[1];s[1]=e;s[2]=r;return s}function b(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function L(n){const t=n[0];const o=n[1];const c=n[2];return Math.sqrt(t*t+o*o+c*c)}const y=L;function E(n){const t=n[0];const o=n[1];const c=n[2];return t*t+o*o+c*c}const x=E;function N(n,t){const o=n[0]-t[0];const c=n[1]-t[1];const s=n[2]-t[2];return Math.sqrt(o*o+c*c+s*s)}const O=N;function $(n,t){const o=n[0]-t[0];const c=n[1]-t[1];const s=n[2]-t[2];return o*o+c*c+s*s}const z=$;function F(t,o){const c=o??new n(3);const s=t[0];const e=t[1];const r=t[2];const u=Math.sqrt(s*s+e*e+r*r);if(u>1e-5){c[0]=s/u;c[1]=e/u;c[2]=r/u}else{c[0]=0;c[1]=0;c[2]=0}return c}function T(t,o){const c=o??new n(3);c[0]=-t[0];c[1]=-t[1];c[2]=-t[2];return c}function k(t,o){const c=o??new n(3);c[0]=t[0];c[1]=t[1];c[2]=t[2];return c}const Z=k;function R(t,o,c){const s=c??new n(3);s[0]=t[0]*o[0];s[1]=t[1]*o[1];s[2]=t[2]*o[2];return s}const V=R;function X(t,o,c){const s=c??new n(3);s[0]=t[0]/o[0];s[1]=t[1]/o[1];s[2]=t[2]/o[2];return s}const Y=X;function _(t=1,o){const c=o??new n(3);const s=Math.random()*2*Math.PI;const e=Math.random()*2-1;const r=Math.sqrt(1-e*e)*t;c[0]=Math.cos(s)*r;c[1]=Math.sin(s)*r;c[2]=e*t;return c}function D(t){const o=t??new n(3);o[0]=0;o[1]=0;o[2]=0;return o}function Q(t,o,c){const s=c??new n(3);const e=t[0];const r=t[1];const u=t[2];const a=o[3]*e+o[7]*r+o[11]*u+o[15]||1;s[0]=(o[0]*e+o[4]*r+o[8]*u+o[12])/a;s[1]=(o[1]*e+o[5]*r+o[9]*u+o[13])/a;s[2]=(o[2]*e+o[6]*r+o[10]*u+o[14])/a;return s}function C(t,o,c){const s=c??new n(3);const e=t[0];const r=t[1];const u=t[2];s[0]=e*o[0*4+0]+r*o[1*4+0]+u*o[2*4+0];s[1]=e*o[0*4+1]+r*o[1*4+1]+u*o[2*4+1];s[2]=e*o[0*4+2]+r*o[1*4+2]+u*o[2*4+2];return s}function U(t,o,c){const s=c??new n(3);const e=t[0];const r=t[1];const u=t[2];s[0]=e*o[0]+r*o[4]+u*o[8];s[1]=e*o[1]+r*o[5]+u*o[9];s[2]=e*o[2]+r*o[6]+u*o[10];return s}function j(t,o,c){const s=c??new n(3);const e=o[0];const r=o[1];const u=o[2];const a=o[3]*2;const i=t[0];const f=t[1];const l=t[2];const h=r*l-u*f;const M=u*i-e*l;const w=e*f-r*i;s[0]=i+h*a+(r*w-u*M)*2;s[1]=f+M*a+(u*h-e*w)*2;s[2]=l+w*a+(e*M-r*h)*2;return s}function B(t,o){const c=o??new n(3);c[0]=t[12];c[1]=t[13];c[2]=t[14];return c}function G(t,o,c){const s=c??new n(3);const e=o*4;s[0]=t[e+0];s[1]=t[e+1];s[2]=t[e+2];return s}function H(t,o){const c=o??new n(3);const s=t[0];const e=t[1];const r=t[2];const u=t[4];const a=t[5];const i=t[6];const f=t[8];const l=t[9];const h=t[10];c[0]=Math.sqrt(s*s+e*e+r*r);c[1]=Math.sqrt(u*u+a*a+i*i);c[2]=Math.sqrt(f*f+l*l+h*h);return c}function J(t,o,c,s){const e=s??new n(3);const r=[];const u=[];r[0]=t[0]-o[0];r[1]=t[1]-o[1];r[2]=t[2]-o[2];u[0]=r[0];u[1]=r[1]*Math.cos(c)-r[2]*Math.sin(c);u[2]=r[1]*Math.sin(c)+r[2]*Math.cos(c);e[0]=u[0]+o[0];e[1]=u[1]+o[1];e[2]=u[2]+o[2];return e}function K(t,o,c,s){const e=s??new n(3);const r=[];const u=[];r[0]=t[0]-o[0];r[1]=t[1]-o[1];r[2]=t[2]-o[2];u[0]=r[2]*Math.sin(c)+r[0]*Math.cos(c);u[1]=r[1];u[2]=r[2]*Math.cos(c)-r[0]*Math.sin(c);e[0]=u[0]+o[0];e[1]=u[1]+o[1];e[2]=u[2]+o[2];return e}function W(t,o,c,s){const e=s??new n(3);const r=[];const u=[];r[0]=t[0]-o[0];r[1]=t[1]-o[1];r[2]=t[2]-o[2];u[0]=r[0]*Math.cos(c)-r[1]*Math.sin(c);u[1]=r[0]*Math.sin(c)+r[1]*Math.cos(c);u[2]=r[2];e[0]=u[0]+o[0];e[1]=u[1]+o[1];e[2]=u[2]+o[2];return e}function nn(t,o,c){const s=c??new n(3);F(t,s);return p(s,o,s)}function tn(t,o,c){const s=c??new n(3);if(L(t)>o){return nn(t,o,s)}return k(t,s)}function on(t,o,c){const s=c??new n(3);return d(t,o,.5,s)}return{create:t,fromValues:o,set:c,ceil:s,floor:e,round:r,clamp:u,add:a,addScaled:i,angle:f,subtract:l,sub:h,equalsApproximately:M,equals:w,lerp:d,lerpV:m,max:I,min:g,mulScalar:p,scale:P,divScalar:S,inverse:A,invert:q,cross:v,dot:b,length:L,len:y,lengthSq:E,lenSq:x,distance:N,dist:O,distanceSq:$,distSq:z,normalize:F,negate:T,copy:k,clone:Z,multiply:R,mul:V,divide:X,div:Y,random:_,zero:D,transformMat4:Q,transformMat4Upper3x3:C,transformMat3:U,transformQuat:j,getTranslation:B,getAxis:G,getScaling:H,rotateX:J,rotateY:K,rotateZ:W,setLength:nn,truncate:tn,midpoint:on}}const cache$3=new Map;function getAPI$3(n){let t=cache$3.get(n);if(!t){t=getAPIImpl$3(n);cache$3.set(n,t)}return t}function getAPIImpl$2(n){const t=getAPI$3(n);function o(t,o,c,s,e,r,u,a,i,f,l,h,M,w,d,m){const I=new n(16);if(t!==undefined){I[0]=t;if(o!==undefined){I[1]=o;if(c!==undefined){I[2]=c;if(s!==undefined){I[3]=s;if(e!==undefined){I[4]=e;if(r!==undefined){I[5]=r;if(u!==undefined){I[6]=u;if(a!==undefined){I[7]=a;if(i!==undefined){I[8]=i;if(f!==undefined){I[9]=f;if(l!==undefined){I[10]=l;if(h!==undefined){I[11]=h;if(M!==undefined){I[12]=M;if(w!==undefined){I[13]=w;if(d!==undefined){I[14]=d;if(m!==undefined){I[15]=m}}}}}}}}}}}}}}}}return I}function c(t,o,c,s,e,r,u,a,i,f,l,h,M,w,d,m,I){const g=I??new n(16);g[0]=t;g[1]=o;g[2]=c;g[3]=s;g[4]=e;g[5]=r;g[6]=u;g[7]=a;g[8]=i;g[9]=f;g[10]=l;g[11]=h;g[12]=M;g[13]=w;g[14]=d;g[15]=m;return g}function s(t,o){const c=o??new n(16);c[0]=t[0];c[1]=t[1];c[2]=t[2];c[3]=0;c[4]=t[4];c[5]=t[5];c[6]=t[6];c[7]=0;c[8]=t[8];c[9]=t[9];c[10]=t[10];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function e(t,o){const c=o??new n(16);const s=t[0];const e=t[1];const r=t[2];const u=t[3];const a=s+s;const i=e+e;const f=r+r;const l=s*a;const h=e*a;const M=e*i;const w=r*a;const d=r*i;const m=r*f;const I=u*a;const g=u*i;const p=u*f;c[0]=1-M-m;c[1]=h+p;c[2]=w-g;c[3]=0;c[4]=h-p;c[5]=1-l-m;c[6]=d+I;c[7]=0;c[8]=w+g;c[9]=d-I;c[10]=1-l-M;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function r(t,o){const c=o??new n(16);c[0]=-t[0];c[1]=-t[1];c[2]=-t[2];c[3]=-t[3];c[4]=-t[4];c[5]=-t[5];c[6]=-t[6];c[7]=-t[7];c[8]=-t[8];c[9]=-t[9];c[10]=-t[10];c[11]=-t[11];c[12]=-t[12];c[13]=-t[13];c[14]=-t[14];c[15]=-t[15];return c}function u(t,o){const c=o??new n(16);c[0]=t[0];c[1]=t[1];c[2]=t[2];c[3]=t[3];c[4]=t[4];c[5]=t[5];c[6]=t[6];c[7]=t[7];c[8]=t[8];c[9]=t[9];c[10]=t[10];c[11]=t[11];c[12]=t[12];c[13]=t[13];c[14]=t[14];c[15]=t[15];return c}const a=u;function i(n,t){return Math.abs(n[0]-t[0])<EPSILON&&Math.abs(n[1]-t[1])<EPSILON&&Math.abs(n[2]-t[2])<EPSILON&&Math.abs(n[3]-t[3])<EPSILON&&Math.abs(n[4]-t[4])<EPSILON&&Math.abs(n[5]-t[5])<EPSILON&&Math.abs(n[6]-t[6])<EPSILON&&Math.abs(n[7]-t[7])<EPSILON&&Math.abs(n[8]-t[8])<EPSILON&&Math.abs(n[9]-t[9])<EPSILON&&Math.abs(n[10]-t[10])<EPSILON&&Math.abs(n[11]-t[11])<EPSILON&&Math.abs(n[12]-t[12])<EPSILON&&Math.abs(n[13]-t[13])<EPSILON&&Math.abs(n[14]-t[14])<EPSILON&&Math.abs(n[15]-t[15])<EPSILON}function f(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[7]===t[7]&&n[8]===t[8]&&n[9]===t[9]&&n[10]===t[10]&&n[11]===t[11]&&n[12]===t[12]&&n[13]===t[13]&&n[14]===t[14]&&n[15]===t[15]}function l(t){const o=t??new n(16);o[0]=1;o[1]=0;o[2]=0;o[3]=0;o[4]=0;o[5]=1;o[6]=0;o[7]=0;o[8]=0;o[9]=0;o[10]=1;o[11]=0;o[12]=0;o[13]=0;o[14]=0;o[15]=1;return o}function h(t,o){const c=o??new n(16);if(c===t){let n;n=t[1];t[1]=t[4];t[4]=n;n=t[2];t[2]=t[8];t[8]=n;n=t[3];t[3]=t[12];t[12]=n;n=t[6];t[6]=t[9];t[9]=n;n=t[7];t[7]=t[13];t[13]=n;n=t[11];t[11]=t[14];t[14]=n;return c}const s=t[0*4+0];const e=t[0*4+1];const r=t[0*4+2];const u=t[0*4+3];const a=t[1*4+0];const i=t[1*4+1];const f=t[1*4+2];const l=t[1*4+3];const h=t[2*4+0];const M=t[2*4+1];const w=t[2*4+2];const d=t[2*4+3];const m=t[3*4+0];const I=t[3*4+1];const g=t[3*4+2];const p=t[3*4+3];c[0]=s;c[1]=a;c[2]=h;c[3]=m;c[4]=e;c[5]=i;c[6]=M;c[7]=I;c[8]=r;c[9]=f;c[10]=w;c[11]=g;c[12]=u;c[13]=l;c[14]=d;c[15]=p;return c}function M(t,o){const c=o??new n(16);const s=t[0*4+0];const e=t[0*4+1];const r=t[0*4+2];const u=t[0*4+3];const a=t[1*4+0];const i=t[1*4+1];const f=t[1*4+2];const l=t[1*4+3];const h=t[2*4+0];const M=t[2*4+1];const w=t[2*4+2];const d=t[2*4+3];const m=t[3*4+0];const I=t[3*4+1];const g=t[3*4+2];const p=t[3*4+3];const P=w*p;const S=g*d;const A=f*p;const q=g*l;const v=f*d;const b=w*l;const L=r*p;const y=g*u;const E=r*d;const x=w*u;const N=r*l;const O=f*u;const $=h*I;const z=m*M;const F=a*I;const T=m*i;const k=a*M;const Z=h*i;const R=s*I;const V=m*e;const X=s*M;const Y=h*e;const _=s*i;const D=a*e;const Q=P*i+q*M+v*I-(S*i+A*M+b*I);const C=S*e+L*M+x*I-(P*e+y*M+E*I);const U=A*e+y*i+N*I-(q*e+L*i+O*I);const j=b*e+E*i+O*M-(v*e+x*i+N*M);const B=1/(s*Q+a*C+h*U+m*j);c[0]=B*Q;c[1]=B*C;c[2]=B*U;c[3]=B*j;c[4]=B*(S*a+A*h+b*m-(P*a+q*h+v*m));c[5]=B*(P*s+y*h+E*m-(S*s+L*h+x*m));c[6]=B*(q*s+L*a+O*m-(A*s+y*a+N*m));c[7]=B*(v*s+x*a+N*h-(b*s+E*a+O*h));c[8]=B*($*l+T*d+k*p-(z*l+F*d+Z*p));c[9]=B*(z*u+R*d+Y*p-($*u+V*d+X*p));c[10]=B*(F*u+V*l+_*p-(T*u+R*l+D*p));c[11]=B*(Z*u+X*l+D*d-(k*u+Y*l+_*d));c[12]=B*(F*w+Z*g+z*f-(k*g+$*f+T*w));c[13]=B*(X*g+$*r+V*w-(R*w+Y*g+z*r));c[14]=B*(R*f+D*g+T*r-(_*g+F*r+V*f));c[15]=B*(_*w+k*r+Y*f-(X*f+D*w+Z*r));return c}function w(n){const t=n[0*4+0];const o=n[0*4+1];const c=n[0*4+2];const s=n[0*4+3];const e=n[1*4+0];const r=n[1*4+1];const u=n[1*4+2];const a=n[1*4+3];const i=n[2*4+0];const f=n[2*4+1];const l=n[2*4+2];const h=n[2*4+3];const M=n[3*4+0];const w=n[3*4+1];const d=n[3*4+2];const m=n[3*4+3];const I=l*m;const g=d*h;const p=u*m;const P=d*a;const S=u*h;const A=l*a;const q=c*m;const v=d*s;const b=c*h;const L=l*s;const y=c*a;const E=u*s;const x=I*r+P*f+S*w-(g*r+p*f+A*w);const N=g*o+q*f+L*w-(I*o+v*f+b*w);const O=p*o+v*r+y*w-(P*o+q*r+E*w);const $=A*o+b*r+E*f-(S*o+L*r+y*f);return t*x+e*N+i*O+M*$}const d=M;function m(t,o,c){const s=c??new n(16);const e=t[0];const r=t[1];const u=t[2];const a=t[3];const i=t[4+0];const f=t[4+1];const l=t[4+2];const h=t[4+3];const M=t[8+0];const w=t[8+1];const d=t[8+2];const m=t[8+3];const I=t[12+0];const g=t[12+1];const p=t[12+2];const P=t[12+3];const S=o[0];const A=o[1];const q=o[2];const v=o[3];const b=o[4+0];const L=o[4+1];const y=o[4+2];const E=o[4+3];const x=o[8+0];const N=o[8+1];const O=o[8+2];const $=o[8+3];const z=o[12+0];const F=o[12+1];const T=o[12+2];const k=o[12+3];s[0]=e*S+i*A+M*q+I*v;s[1]=r*S+f*A+w*q+g*v;s[2]=u*S+l*A+d*q+p*v;s[3]=a*S+h*A+m*q+P*v;s[4]=e*b+i*L+M*y+I*E;s[5]=r*b+f*L+w*y+g*E;s[6]=u*b+l*L+d*y+p*E;s[7]=a*b+h*L+m*y+P*E;s[8]=e*x+i*N+M*O+I*$;s[9]=r*x+f*N+w*O+g*$;s[10]=u*x+l*N+d*O+p*$;s[11]=a*x+h*N+m*O+P*$;s[12]=e*z+i*F+M*T+I*k;s[13]=r*z+f*F+w*T+g*k;s[14]=u*z+l*F+d*T+p*k;s[15]=a*z+h*F+m*T+P*k;return s}const I=m;function g(n,t,o){const c=o??l();if(n!==c){c[0]=n[0];c[1]=n[1];c[2]=n[2];c[3]=n[3];c[4]=n[4];c[5]=n[5];c[6]=n[6];c[7]=n[7];c[8]=n[8];c[9]=n[9];c[10]=n[10];c[11]=n[11]}c[12]=t[0];c[13]=t[1];c[14]=t[2];c[15]=1;return c}function p(n,o){const c=o??t.create();c[0]=n[12];c[1]=n[13];c[2]=n[14];return c}function P(n,o,c){const s=c??t.create();const e=o*4;s[0]=n[e+0];s[1]=n[e+1];s[2]=n[e+2];return s}function S(n,t,o,c){const s=c===n?c:u(n,c);const e=o*4;s[e+0]=t[0];s[e+1]=t[1];s[e+2]=t[2];return s}function A(n,o){const c=o??t.create();const s=n[0];const e=n[1];const r=n[2];const u=n[4];const a=n[5];const i=n[6];const f=n[8];const l=n[9];const h=n[10];c[0]=Math.sqrt(s*s+e*e+r*r);c[1]=Math.sqrt(u*u+a*a+i*i);c[2]=Math.sqrt(f*f+l*l+h*h);return c}function q(t,o,c,s,e){const r=e??new n(16);const u=Math.tan(Math.PI*.5-.5*t);r[0]=u/o;r[1]=0;r[2]=0;r[3]=0;r[4]=0;r[5]=u;r[6]=0;r[7]=0;r[8]=0;r[9]=0;r[11]=-1;r[12]=0;r[13]=0;r[15]=0;if(Number.isFinite(s)){const n=1/(c-s);r[10]=s*n;r[14]=s*c*n}else{r[10]=-1;r[14]=-c}return r}function v(t,o,c,s=Infinity,e){const r=e??new n(16);const u=1/Math.tan(t*.5);r[0]=u/o;r[1]=0;r[2]=0;r[3]=0;r[4]=0;r[5]=u;r[6]=0;r[7]=0;r[8]=0;r[9]=0;r[11]=-1;r[12]=0;r[13]=0;r[15]=0;if(s===Infinity){r[10]=0;r[14]=c}else{const n=1/(s-c);r[10]=c*n;r[14]=s*c*n}return r}function b(t,o,c,s,e,r,u){const a=u??new n(16);a[0]=2/(o-t);a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2/(s-c);a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1/(e-r);a[11]=0;a[12]=(o+t)/(t-o);a[13]=(s+c)/(c-s);a[14]=e/(e-r);a[15]=1;return a}function L(t,o,c,s,e,r,u){const a=u??new n(16);const i=o-t;const f=s-c;const l=e-r;a[0]=2*e/i;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*e/f;a[6]=0;a[7]=0;a[8]=(t+o)/i;a[9]=(s+c)/f;a[10]=r/l;a[11]=-1;a[12]=0;a[13]=0;a[14]=e*r/l;a[15]=0;return a}function y(t,o,c,s,e,r=Infinity,u){const a=u??new n(16);const i=o-t;const f=s-c;a[0]=2*e/i;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*e/f;a[6]=0;a[7]=0;a[8]=(t+o)/i;a[9]=(s+c)/f;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;if(r===Infinity){a[10]=0;a[14]=e}else{const n=1/(r-e);a[10]=e*n;a[14]=r*e*n}return a}const E=t.create();const x=t.create();const N=t.create();function O(o,c,s,e){const r=e??new n(16);t.normalize(t.subtract(c,o,N),N);t.normalize(t.cross(s,N,E),E);t.normalize(t.cross(N,E,x),x);r[0]=E[0];r[1]=E[1];r[2]=E[2];r[3]=0;r[4]=x[0];r[5]=x[1];r[6]=x[2];r[7]=0;r[8]=N[0];r[9]=N[1];r[10]=N[2];r[11]=0;r[12]=o[0];r[13]=o[1];r[14]=o[2];r[15]=1;return r}function $(o,c,s,e){const r=e??new n(16);t.normalize(t.subtract(o,c,N),N);t.normalize(t.cross(s,N,E),E);t.normalize(t.cross(N,E,x),x);r[0]=E[0];r[1]=E[1];r[2]=E[2];r[3]=0;r[4]=x[0];r[5]=x[1];r[6]=x[2];r[7]=0;r[8]=N[0];r[9]=N[1];r[10]=N[2];r[11]=0;r[12]=o[0];r[13]=o[1];r[14]=o[2];r[15]=1;return r}function z(o,c,s,e){const r=e??new n(16);t.normalize(t.subtract(o,c,N),N);t.normalize(t.cross(s,N,E),E);t.normalize(t.cross(N,E,x),x);r[0]=E[0];r[1]=x[0];r[2]=N[0];r[3]=0;r[4]=E[1];r[5]=x[1];r[6]=N[1];r[7]=0;r[8]=E[2];r[9]=x[2];r[10]=N[2];r[11]=0;r[12]=-(E[0]*o[0]+E[1]*o[1]+E[2]*o[2]);r[13]=-(x[0]*o[0]+x[1]*o[1]+x[2]*o[2]);r[14]=-(N[0]*o[0]+N[1]*o[1]+N[2]*o[2]);r[15]=1;return r}function F(t,o){const c=o??new n(16);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=t[0];c[13]=t[1];c[14]=t[2];c[15]=1;return c}function T(t,o,c){const s=c??new n(16);const e=o[0];const r=o[1];const u=o[2];const a=t[0];const i=t[1];const f=t[2];const l=t[3];const h=t[1*4+0];const M=t[1*4+1];const w=t[1*4+2];const d=t[1*4+3];const m=t[2*4+0];const I=t[2*4+1];const g=t[2*4+2];const p=t[2*4+3];const P=t[3*4+0];const S=t[3*4+1];const A=t[3*4+2];const q=t[3*4+3];if(t!==s){s[0]=a;s[1]=i;s[2]=f;s[3]=l;s[4]=h;s[5]=M;s[6]=w;s[7]=d;s[8]=m;s[9]=I;s[10]=g;s[11]=p}s[12]=a*e+h*r+m*u+P;s[13]=i*e+M*r+I*u+S;s[14]=f*e+w*r+g*u+A;s[15]=l*e+d*r+p*u+q;return s}function k(t,o){const c=o??new n(16);const s=Math.cos(t);const e=Math.sin(t);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=s;c[6]=e;c[7]=0;c[8]=0;c[9]=-e;c[10]=s;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function Z(t,o,c){const s=c??new n(16);const e=t[4];const r=t[5];const u=t[6];const a=t[7];const i=t[8];const f=t[9];const l=t[10];const h=t[11];const M=Math.cos(o);const w=Math.sin(o);s[4]=M*e+w*i;s[5]=M*r+w*f;s[6]=M*u+w*l;s[7]=M*a+w*h;s[8]=M*i-w*e;s[9]=M*f-w*r;s[10]=M*l-w*u;s[11]=M*h-w*a;if(t!==s){s[0]=t[0];s[1]=t[1];s[2]=t[2];s[3]=t[3];s[12]=t[12];s[13]=t[13];s[14]=t[14];s[15]=t[15]}return s}function R(t,o){const c=o??new n(16);const s=Math.cos(t);const e=Math.sin(t);c[0]=s;c[1]=0;c[2]=-e;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=e;c[9]=0;c[10]=s;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function V(t,o,c){const s=c??new n(16);const e=t[0*4+0];const r=t[0*4+1];const u=t[0*4+2];const a=t[0*4+3];const i=t[2*4+0];const f=t[2*4+1];const l=t[2*4+2];const h=t[2*4+3];const M=Math.cos(o);const w=Math.sin(o);s[0]=M*e-w*i;s[1]=M*r-w*f;s[2]=M*u-w*l;s[3]=M*a-w*h;s[8]=M*i+w*e;s[9]=M*f+w*r;s[10]=M*l+w*u;s[11]=M*h+w*a;if(t!==s){s[4]=t[4];s[5]=t[5];s[6]=t[6];s[7]=t[7];s[12]=t[12];s[13]=t[13];s[14]=t[14];s[15]=t[15]}return s}function X(t,o){const c=o??new n(16);const s=Math.cos(t);const e=Math.sin(t);c[0]=s;c[1]=e;c[2]=0;c[3]=0;c[4]=-e;c[5]=s;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function Y(t,o,c){const s=c??new n(16);const e=t[0*4+0];const r=t[0*4+1];const u=t[0*4+2];const a=t[0*4+3];const i=t[1*4+0];const f=t[1*4+1];const l=t[1*4+2];const h=t[1*4+3];const M=Math.cos(o);const w=Math.sin(o);s[0]=M*e+w*i;s[1]=M*r+w*f;s[2]=M*u+w*l;s[3]=M*a+w*h;s[4]=M*i-w*e;s[5]=M*f-w*r;s[6]=M*l-w*u;s[7]=M*h-w*a;if(t!==s){s[8]=t[8];s[9]=t[9];s[10]=t[10];s[11]=t[11];s[12]=t[12];s[13]=t[13];s[14]=t[14];s[15]=t[15]}return s}function _(t,o,c){const s=c??new n(16);let e=t[0];let r=t[1];let u=t[2];const a=Math.sqrt(e*e+r*r+u*u);e/=a;r/=a;u/=a;const i=e*e;const f=r*r;const l=u*u;const h=Math.cos(o);const M=Math.sin(o);const w=1-h;s[0]=i+(1-i)*h;s[1]=e*r*w+u*M;s[2]=e*u*w-r*M;s[3]=0;s[4]=e*r*w-u*M;s[5]=f+(1-f)*h;s[6]=r*u*w+e*M;s[7]=0;s[8]=e*u*w+r*M;s[9]=r*u*w-e*M;s[10]=l+(1-l)*h;s[11]=0;s[12]=0;s[13]=0;s[14]=0;s[15]=1;return s}const D=_;function Q(t,o,c,s){const e=s??new n(16);let r=o[0];let u=o[1];let a=o[2];const i=Math.sqrt(r*r+u*u+a*a);r/=i;u/=i;a/=i;const f=r*r;const l=u*u;const h=a*a;const M=Math.cos(c);const w=Math.sin(c);const d=1-M;const m=f+(1-f)*M;const I=r*u*d+a*w;const g=r*a*d-u*w;const p=r*u*d-a*w;const P=l+(1-l)*M;const S=u*a*d+r*w;const A=r*a*d+u*w;const q=u*a*d-r*w;const v=h+(1-h)*M;const b=t[0];const L=t[1];const y=t[2];const E=t[3];const x=t[4];const N=t[5];const O=t[6];const $=t[7];const z=t[8];const F=t[9];const T=t[10];const k=t[11];e[0]=m*b+I*x+g*z;e[1]=m*L+I*N+g*F;e[2]=m*y+I*O+g*T;e[3]=m*E+I*$+g*k;e[4]=p*b+P*x+S*z;e[5]=p*L+P*N+S*F;e[6]=p*y+P*O+S*T;e[7]=p*E+P*$+S*k;e[8]=A*b+q*x+v*z;e[9]=A*L+q*N+v*F;e[10]=A*y+q*O+v*T;e[11]=A*E+q*$+v*k;if(t!==e){e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}return e}const C=Q;function U(t,o){const c=o??new n(16);c[0]=t[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=t[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=t[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function j(t,o,c){const s=c??new n(16);const e=o[0];const r=o[1];const u=o[2];s[0]=e*t[0*4+0];s[1]=e*t[0*4+1];s[2]=e*t[0*4+2];s[3]=e*t[0*4+3];s[4]=r*t[1*4+0];s[5]=r*t[1*4+1];s[6]=r*t[1*4+2];s[7]=r*t[1*4+3];s[8]=u*t[2*4+0];s[9]=u*t[2*4+1];s[10]=u*t[2*4+2];s[11]=u*t[2*4+3];if(t!==s){s[12]=t[12];s[13]=t[13];s[14]=t[14];s[15]=t[15]}return s}function B(t,o){const c=o??new n(16);c[0]=t;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=t;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=t;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function G(t,o,c){const s=c??new n(16);s[0]=o*t[0*4+0];s[1]=o*t[0*4+1];s[2]=o*t[0*4+2];s[3]=o*t[0*4+3];s[4]=o*t[1*4+0];s[5]=o*t[1*4+1];s[6]=o*t[1*4+2];s[7]=o*t[1*4+3];s[8]=o*t[2*4+0];s[9]=o*t[2*4+1];s[10]=o*t[2*4+2];s[11]=o*t[2*4+3];if(t!==s){s[12]=t[12];s[13]=t[13];s[14]=t[14];s[15]=t[15]}return s}return{create:o,set:c,fromMat3:s,fromQuat:e,negate:r,copy:u,clone:a,equalsApproximately:i,equals:f,identity:l,transpose:h,inverse:M,determinant:w,invert:d,multiply:m,mul:I,setTranslation:g,getTranslation:p,getAxis:P,setAxis:S,getScaling:A,perspective:q,perspectiveReverseZ:v,ortho:b,frustum:L,frustumReverseZ:y,aim:O,cameraAim:$,lookAt:z,translation:F,translate:T,rotationX:k,rotateX:Z,rotationY:R,rotateY:V,rotationZ:X,rotateZ:Y,axisRotation:_,rotation:D,axisRotate:Q,rotate:C,scaling:U,scale:j,uniformScaling:B,uniformScale:G}}const cache$2=new Map;function getAPI$2(n){let t=cache$2.get(n);if(!t){t=getAPIImpl$2(n);cache$2.set(n,t)}return t}function getAPIImpl$1(n){const t=getAPI$3(n);function o(t,o,c,s){const e=new n(4);if(t!==undefined){e[0]=t;if(o!==undefined){e[1]=o;if(c!==undefined){e[2]=c;if(s!==undefined){e[3]=s}}}}return e}const c=o;function s(t,o,c,s,e){const r=e??new n(4);r[0]=t;r[1]=o;r[2]=c;r[3]=s;return r}function e(t,o,c){const s=c??new n(4);const e=o*.5;const r=Math.sin(e);s[0]=r*t[0];s[1]=r*t[1];s[2]=r*t[2];s[3]=Math.cos(e);return s}function r(n,o){const c=o??t.create(3);const s=Math.acos(n[3])*2;const e=Math.sin(s*.5);if(e>EPSILON){c[0]=n[0]/e;c[1]=n[1]/e;c[2]=n[2]/e}else{c[0]=1;c[1]=0;c[2]=0}return{angle:s,axis:c}}function u(n,t){const o=L(n,t);return Math.acos(2*o*o-1)}function a(t,o,c){const s=c??new n(4);const e=t[0];const r=t[1];const u=t[2];const a=t[3];const i=o[0];const f=o[1];const l=o[2];const h=o[3];s[0]=e*h+a*i+r*l-u*f;s[1]=r*h+a*f+u*i-e*l;s[2]=u*h+a*l+e*f-r*i;s[3]=a*h-e*i-r*f-u*l;return s}const i=a;function f(t,o,c){const s=c??new n(4);const e=o*.5;const r=t[0];const u=t[1];const a=t[2];const i=t[3];const f=Math.sin(e);const l=Math.cos(e);s[0]=r*l+i*f;s[1]=u*l+a*f;s[2]=a*l-u*f;s[3]=i*l-r*f;return s}function l(t,o,c){const s=c??new n(4);const e=o*.5;const r=t[0];const u=t[1];const a=t[2];const i=t[3];const f=Math.sin(e);const l=Math.cos(e);s[0]=r*l-a*f;s[1]=u*l+i*f;s[2]=a*l+r*f;s[3]=i*l-u*f;return s}function h(t,o,c){const s=c??new n(4);const e=o*.5;const r=t[0];const u=t[1];const a=t[2];const i=t[3];const f=Math.sin(e);const l=Math.cos(e);s[0]=r*l+u*f;s[1]=u*l-r*f;s[2]=a*l+i*f;s[3]=i*l-a*f;return s}function M(t,o,c,s){const e=s??new n(4);const r=t[0];const u=t[1];const a=t[2];const i=t[3];let f=o[0];let l=o[1];let h=o[2];let M=o[3];let w=r*f+u*l+a*h+i*M;if(w<0){w=-w;f=-f;l=-l;h=-h;M=-M}let d;let m;if(1-w>EPSILON){const n=Math.acos(w);const t=Math.sin(n);d=Math.sin((1-c)*n)/t;m=Math.sin(c*n)/t}else{d=1-c;m=c}e[0]=d*r+m*f;e[1]=d*u+m*l;e[2]=d*a+m*h;e[3]=d*i+m*M;return e}function w(t,o){const c=o??new n(4);const s=t[0];const e=t[1];const r=t[2];const u=t[3];const a=s*s+e*e+r*r+u*u;const i=a?1/a:0;c[0]=-s*i;c[1]=-e*i;c[2]=-r*i;c[3]=u*i;return c}function d(t,o){const c=o??new n(4);c[0]=-t[0];c[1]=-t[1];c[2]=-t[2];c[3]=t[3];return c}function m(t,o){const c=o??new n(4);const s=t[0]+t[5]+t[10];if(s>0){const n=Math.sqrt(s+1);c[3]=.5*n;const o=.5/n;c[0]=(t[6]-t[9])*o;c[1]=(t[8]-t[2])*o;c[2]=(t[1]-t[4])*o}else{let n=0;if(t[5]>t[0]){n=1}if(t[10]>t[n*4+n]){n=2}const o=(n+1)%3;const s=(n+2)%3;const e=Math.sqrt(t[n*4+n]-t[o*4+o]-t[s*4+s]+1);c[n]=.5*e;const r=.5/e;c[3]=(t[o*4+s]-t[s*4+o])*r;c[o]=(t[o*4+n]+t[n*4+o])*r;c[s]=(t[s*4+n]+t[n*4+s])*r}return c}function I(t,o,c,s,e){const r=e??new n(4);const u=t*.5;const a=o*.5;const i=c*.5;const f=Math.sin(u);const l=Math.cos(u);const h=Math.sin(a);const M=Math.cos(a);const w=Math.sin(i);const d=Math.cos(i);switch(s){case"xyz":r[0]=f*M*d+l*h*w;r[1]=l*h*d-f*M*w;r[2]=l*M*w+f*h*d;r[3]=l*M*d-f*h*w;break;case"xzy":r[0]=f*M*d-l*h*w;r[1]=l*h*d-f*M*w;r[2]=l*M*w+f*h*d;r[3]=l*M*d+f*h*w;break;case"yxz":r[0]=f*M*d+l*h*w;r[1]=l*h*d-f*M*w;r[2]=l*M*w-f*h*d;r[3]=l*M*d+f*h*w;break;case"yzx":r[0]=f*M*d+l*h*w;r[1]=l*h*d+f*M*w;r[2]=l*M*w-f*h*d;r[3]=l*M*d-f*h*w;break;case"zxy":r[0]=f*M*d-l*h*w;r[1]=l*h*d+f*M*w;r[2]=l*M*w+f*h*d;r[3]=l*M*d-f*h*w;break;case"zyx":r[0]=f*M*d-l*h*w;r[1]=l*h*d+f*M*w;r[2]=l*M*w-f*h*d;r[3]=l*M*d+f*h*w;break;default:throw new Error(`Unknown rotation order: ${s}`)}return r}function g(t,o){const c=o??new n(4);c[0]=t[0];c[1]=t[1];c[2]=t[2];c[3]=t[3];return c}const p=g;function P(t,o,c){const s=c??new n(4);s[0]=t[0]+o[0];s[1]=t[1]+o[1];s[2]=t[2]+o[2];s[3]=t[3]+o[3];return s}function S(t,o,c){const s=c??new n(4);s[0]=t[0]-o[0];s[1]=t[1]-o[1];s[2]=t[2]-o[2];s[3]=t[3]-o[3];return s}const A=S;function q(t,o,c){const s=c??new n(4);s[0]=t[0]*o;s[1]=t[1]*o;s[2]=t[2]*o;s[3]=t[3]*o;return s}const v=q;function b(t,o,c){const s=c??new n(4);s[0]=t[0]/o;s[1]=t[1]/o;s[2]=t[2]/o;s[3]=t[3]/o;return s}function L(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function y(t,o,c,s){const e=s??new n(4);e[0]=t[0]+c*(o[0]-t[0]);e[1]=t[1]+c*(o[1]-t[1]);e[2]=t[2]+c*(o[2]-t[2]);e[3]=t[3]+c*(o[3]-t[3]);return e}function E(n){const t=n[0];const o=n[1];const c=n[2];const s=n[3];return Math.sqrt(t*t+o*o+c*c+s*s)}const x=E;function N(n){const t=n[0];const o=n[1];const c=n[2];const s=n[3];return t*t+o*o+c*c+s*s}const O=N;function $(t,o){const c=o??new n(4);const s=t[0];const e=t[1];const r=t[2];const u=t[3];const a=Math.sqrt(s*s+e*e+r*r+u*u);if(a>1e-5){c[0]=s/a;c[1]=e/a;c[2]=r/a;c[3]=u/a}else{c[0]=0;c[1]=0;c[2]=0;c[3]=0}return c}function z(n,t){return Math.abs(n[0]-t[0])<EPSILON&&Math.abs(n[1]-t[1])<EPSILON&&Math.abs(n[2]-t[2])<EPSILON&&Math.abs(n[3]-t[3])<EPSILON}function F(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]}function T(t){const o=t??new n(4);o[0]=0;o[1]=0;o[2]=0;o[3]=1;return o}const k=t.create();const Z=t.create();const R=t.create();function V(o,c,s){const r=s??new n(4);const u=t.dot(o,c);if(u<-.999999){t.cross(Z,o,k);if(t.len(k)<1e-6){t.cross(R,o,k)}t.normalize(k,k);e(k,Math.PI,r);return r}else if(u>.999999){r[0]=0;r[1]=0;r[2]=0;r[3]=1;return r}else{t.cross(o,c,k);r[0]=k[0];r[1]=k[1];r[2]=k[2];r[3]=1+u;return $(r,r)}}const X=new n(4);const Y=new n(4);function _(t,o,c,s,e,r){const u=r??new n(4);M(t,s,e,X);M(o,c,e,Y);M(X,Y,2*e*(1-e),u);return u}return{create:o,fromValues:c,set:s,fromAxisAngle:e,toAxisAngle:r,angle:u,multiply:a,mul:i,rotateX:f,rotateY:l,rotateZ:h,slerp:M,inverse:w,conjugate:d,fromMat:m,fromEuler:I,copy:g,clone:p,add:P,subtract:S,sub:A,mulScalar:q,scale:v,divScalar:b,dot:L,lerp:y,length:E,len:x,lengthSq:N,lenSq:O,normalize:$,equalsApproximately:z,equals:F,identity:T,rotationTo:V,sqlerp:_}}const cache$1=new Map;function getAPI$1(n){let t=cache$1.get(n);if(!t){t=getAPIImpl$1(n);cache$1.set(n,t)}return t}function getAPIImpl(n){function t(t,o,c,s){const e=new n(4);if(t!==undefined){e[0]=t;if(o!==undefined){e[1]=o;if(c!==undefined){e[2]=c;if(s!==undefined){e[3]=s}}}}return e}const o=t;function c(t,o,c,s,e){const r=e??new n(4);r[0]=t;r[1]=o;r[2]=c;r[3]=s;return r}function s(t,o){const c=o??new n(4);c[0]=Math.ceil(t[0]);c[1]=Math.ceil(t[1]);c[2]=Math.ceil(t[2]);c[3]=Math.ceil(t[3]);return c}function e(t,o){const c=o??new n(4);c[0]=Math.floor(t[0]);c[1]=Math.floor(t[1]);c[2]=Math.floor(t[2]);c[3]=Math.floor(t[3]);return c}function r(t,o){const c=o??new n(4);c[0]=Math.round(t[0]);c[1]=Math.round(t[1]);c[2]=Math.round(t[2]);c[3]=Math.round(t[3]);return c}function u(t,o=0,c=1,s){const e=s??new n(4);e[0]=Math.min(c,Math.max(o,t[0]));e[1]=Math.min(c,Math.max(o,t[1]));e[2]=Math.min(c,Math.max(o,t[2]));e[3]=Math.min(c,Math.max(o,t[3]));return e}function a(t,o,c){const s=c??new n(4);s[0]=t[0]+o[0];s[1]=t[1]+o[1];s[2]=t[2]+o[2];s[3]=t[3]+o[3];return s}function i(t,o,c,s){const e=s??new n(4);e[0]=t[0]+o[0]*c;e[1]=t[1]+o[1]*c;e[2]=t[2]+o[2]*c;e[3]=t[3]+o[3]*c;return e}function f(t,o,c){const s=c??new n(4);s[0]=t[0]-o[0];s[1]=t[1]-o[1];s[2]=t[2]-o[2];s[3]=t[3]-o[3];return s}const l=f;function h(n,t){return Math.abs(n[0]-t[0])<EPSILON&&Math.abs(n[1]-t[1])<EPSILON&&Math.abs(n[2]-t[2])<EPSILON&&Math.abs(n[3]-t[3])<EPSILON}function M(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]}function w(t,o,c,s){const e=s??new n(4);e[0]=t[0]+c*(o[0]-t[0]);e[1]=t[1]+c*(o[1]-t[1]);e[2]=t[2]+c*(o[2]-t[2]);e[3]=t[3]+c*(o[3]-t[3]);return e}function d(t,o,c,s){const e=s??new n(4);e[0]=t[0]+c[0]*(o[0]-t[0]);e[1]=t[1]+c[1]*(o[1]-t[1]);e[2]=t[2]+c[2]*(o[2]-t[2]);e[3]=t[3]+c[3]*(o[3]-t[3]);return e}function m(t,o,c){const s=c??new n(4);s[0]=Math.max(t[0],o[0]);s[1]=Math.max(t[1],o[1]);s[2]=Math.max(t[2],o[2]);s[3]=Math.max(t[3],o[3]);return s}function I(t,o,c){const s=c??new n(4);s[0]=Math.min(t[0],o[0]);s[1]=Math.min(t[1],o[1]);s[2]=Math.min(t[2],o[2]);s[3]=Math.min(t[3],o[3]);return s}function g(t,o,c){const s=c??new n(4);s[0]=t[0]*o;s[1]=t[1]*o;s[2]=t[2]*o;s[3]=t[3]*o;return s}const p=g;function P(t,o,c){const s=c??new n(4);s[0]=t[0]/o;s[1]=t[1]/o;s[2]=t[2]/o;s[3]=t[3]/o;return s}function S(t,o){const c=o??new n(4);c[0]=1/t[0];c[1]=1/t[1];c[2]=1/t[2];c[3]=1/t[3];return c}const A=S;function q(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function v(n){const t=n[0];const o=n[1];const c=n[2];const s=n[3];return Math.sqrt(t*t+o*o+c*c+s*s)}const b=v;function L(n){const t=n[0];const o=n[1];const c=n[2];const s=n[3];return t*t+o*o+c*c+s*s}const y=L;function E(n,t){const o=n[0]-t[0];const c=n[1]-t[1];const s=n[2]-t[2];const e=n[3]-t[3];return Math.sqrt(o*o+c*c+s*s+e*e)}const x=E;function N(n,t){const o=n[0]-t[0];const c=n[1]-t[1];const s=n[2]-t[2];const e=n[3]-t[3];return o*o+c*c+s*s+e*e}const O=N;function $(t,o){const c=o??new n(4);const s=t[0];const e=t[1];const r=t[2];const u=t[3];const a=Math.sqrt(s*s+e*e+r*r+u*u);if(a>1e-5){c[0]=s/a;c[1]=e/a;c[2]=r/a;c[3]=u/a}else{c[0]=0;c[1]=0;c[2]=0;c[3]=0}return c}function z(t,o){const c=o??new n(4);c[0]=-t[0];c[1]=-t[1];c[2]=-t[2];c[3]=-t[3];return c}function F(t,o){const c=o??new n(4);c[0]=t[0];c[1]=t[1];c[2]=t[2];c[3]=t[3];return c}const T=F;function k(t,o,c){const s=c??new n(4);s[0]=t[0]*o[0];s[1]=t[1]*o[1];s[2]=t[2]*o[2];s[3]=t[3]*o[3];return s}const Z=k;function R(t,o,c){const s=c??new n(4);s[0]=t[0]/o[0];s[1]=t[1]/o[1];s[2]=t[2]/o[2];s[3]=t[3]/o[3];return s}const V=R;function X(t){const o=t??new n(4);o[0]=0;o[1]=0;o[2]=0;o[3]=0;return o}function Y(t,o,c){const s=c??new n(4);const e=t[0];const r=t[1];const u=t[2];const a=t[3];s[0]=o[0]*e+o[4]*r+o[8]*u+o[12]*a;s[1]=o[1]*e+o[5]*r+o[9]*u+o[13]*a;s[2]=o[2]*e+o[6]*r+o[10]*u+o[14]*a;s[3]=o[3]*e+o[7]*r+o[11]*u+o[15]*a;return s}function _(t,o,c){const s=c??new n(4);$(t,s);return g(s,o,s)}function D(t,o,c){const s=c??new n(4);if(v(t)>o){return _(t,o,s)}return F(t,s)}function Q(t,o,c){const s=c??new n(4);return w(t,o,.5,s)}return{create:t,fromValues:o,set:c,ceil:s,floor:e,round:r,clamp:u,add:a,addScaled:i,subtract:f,sub:l,equalsApproximately:h,equals:M,lerp:w,lerpV:d,max:m,min:I,mulScalar:g,scale:p,divScalar:P,inverse:S,invert:A,dot:q,length:v,len:b,lengthSq:L,lenSq:y,distance:E,dist:x,distanceSq:N,distSq:O,normalize:$,negate:z,copy:F,clone:T,multiply:k,mul:Z,divide:R,div:V,zero:X,transformMat4:Y,setLength:_,truncate:D,midpoint:Q}}const cache=new Map;function getAPI(n){let t=cache.get(n);if(!t){t=getAPIImpl(n);cache.set(n,t)}return t}function wgpuMatrixAPI(n,t,o,c,s,e){return{mat4:getAPI$2(n),mat3:getAPI$4(t),quat:getAPI$1(o),vec2:getAPI$5(c),vec3:getAPI$3(s),vec4:getAPI(e)}}const{mat4:mat4,mat3:mat3,quat:quat,vec2:vec2,vec3:vec3,vec4:vec4}=wgpuMatrixAPI(Float32Array,Float32Array,Float32Array,Float32Array,Float32Array,Float32Array);const{mat4:mat4d,mat3:mat3d,quat:quatd,vec2:vec2d,vec3:vec3d,vec4:vec4d}=wgpuMatrixAPI(Float64Array,Float64Array,Float64Array,Float64Array,Float64Array,Float64Array);const{mat4:mat4n,mat3:mat3n,quat:quatn,vec2:vec2n,vec3:vec3n,vec4:vec4n}=wgpuMatrixAPI(ZeroArray,Array,Array,Array,Array,Array);export{mat3,mat3d,mat3n,mat4,mat4d,mat4n,quat,quatd,quatn,utils,vec2,vec2d,vec2n,vec3,vec3d,vec3n,vec4,vec4d,vec4n};